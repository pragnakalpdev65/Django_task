{% extends "E_commerce_app/base.html" %}
{% block title %}My Cart{% endblock %}

{% block content %}
  <h2 class="text-center text-primary mb-4">Your Shopping Cart</h2>

  {% if cart_items %}
    <ul class="list-group shadow-sm">
      {% for item in cart_items %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ item.product.name }}</strong><br />
            Price: ₹{{ item.product.price }} <br />
            Quantity: {{ item.quantity }} <br />
            <strong>Total: ₹{{ item.total_price }}</strong>
          </div>

          <div>
            <form method="post" action="{% url 'additem' item.id %}" class="d-inline">
              {% csrf_token %}
              <button class="btn btn-sm btn-outline-primary" title="Add one more">+</button>
            </form>

            <form method="post" action="{% url 'removeitem' item.id %}" class="d-inline">
              {% csrf_token %}
              <button class="btn btn-sm btn-outline-danger" title="Remove one">−</button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>

    <div class="text-end mt-4">
      <h5 class="fw-bold">Total Amount: ₹{{ total }}</h5>
      <a href="{% url 'create_order' %}" class="btn btn-primary">Proceed to Buy</a>
    </div>
  {% else %}
    <div class="text-center mt-5">
      <p class="text-muted fs-5">Your cart is empty!</p>
      <a href="{% url 'category_list' %}" class="btn btn-primary">Shop Now</a>
    </div>
  {% endif %}
{% endblock %}
